# Etapa de build con Node.js
FROM node:20 AS build

# Especificamos el directorio de trabajo
WORKDIR /app

# Clonamos el repositorio del frontend desde Git
RUN git clone https://github.com/RSAdrian9/ProjectSchoolStudent-Front-end.git .

# Instalamos las dependencias y generamos el build de producci贸n
RUN npm install && npm run build

# Etapa de producci贸n con Nginx
FROM nginx:latest

# Eliminamos archivos de configuraci贸n por defecto de Nginx
RUN rm -rf /etc/nginx/conf.d/default.conf

# Copiamos el nuevo archivo de configuraci贸n de Nginx
COPY nginx.conf /etc/nginx/conf.d/default.conf

# Copiamos los archivos de la build al directorio de Nginx
COPY --from=build /app/dist /usr/share/nginx/html

# Exponemos el puerto 80
EXPOSE 80

# Comando de inicio de Nginx
CMD ["nginx", "-g", "daemon off;"]
